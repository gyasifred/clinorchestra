{
  "name": "interpret_zscore_malnutrition",
  "code": "def interpret_zscore_malnutrition(zscore: float, measurement_type: str) -> str:\n    \"\"\"\n    Interpret z-score for growth assessment following WHO/ASPEN criteria.\n\n    IMPORTANT: Returns OBJECTIVE interpretation only. Does NOT diagnose malnutrition.\n    Diagnosis requires comprehensive assessment per ASPEN (\u22652 indicators).\n\n    Z-score ranges (WHO/ASPEN):\n    - Weight-for-height or BMI-for-age:\n      * z < -3: Severe growth deficit\n      * -3 \u2264 z < -2: Moderate growth deficit\n      * -2 \u2264 z < -1: Mild growth deficit (at risk)\n      * -1 \u2264 z \u2264 +1: Normal range\n      * z > +2: Above normal range\n\n    Args:\n        zscore: Z-score value\n        measurement_type: Type of measurement ('weight-for-age', 'height-for-age', 'BMI-for-age', etc.)\n\n    Returns:\n        Objective interpretation of z-score with percentile context\n    \"\"\"\n    measurement_type = measurement_type.lower().replace(\" \", \"-\")\n\n    # Normalize measurement type\n    if \"weight\" in measurement_type and (\"height\" in measurement_type or \"length\" in measurement_type):\n        category = \"weight-for-height\"\n    elif \"bmi\" in measurement_type:\n        category = \"bmi\"\n    elif \"height\" in measurement_type or \"length\" in measurement_type:\n        category = \"height-for-age\"\n    elif \"weight\" in measurement_type:\n        category = \"weight-for-age\"\n    else:\n        category = \"unknown\"\n\n    # Calculate approximate percentile\n    def zscore_to_percentile(z):\n        mappings = {-3.0: 0.13, -2.5: 0.62, -2.0: 2.3, -1.88: 3.0, -1.64: 5.0, -1.0: 15.9,\n                    0.0: 50.0, 1.0: 84.1, 1.64: 95.0, 2.0: 97.7, 3.0: 99.87}\n        if z in mappings:\n            return mappings[z]\n        z_keys = sorted(mappings.keys())\n        if z <= z_keys[0]:\n            return mappings[z_keys[0]]\n        if z >= z_keys[-1]:\n            return mappings[z_keys[-1]]\n        for i in range(len(z_keys) - 1):\n            if z_keys[i] <= z <= z_keys[i+1]:\n                z1, z2 = z_keys[i], z_keys[i+1]\n                p1, p2 = mappings[z1], mappings[z2]\n                proportion = (z - z1) / (z2 - z1)\n                return p1 + proportion * (p2 - p1)\n        return 50.0\n\n    percentile = zscore_to_percentile(zscore)\n\n    # Generate objective interpretation\n    if category in [\"weight-for-height\", \"bmi\"]:\n        if zscore < -3:\n            severity_category = \"Severe growth deficit\"\n            interpretation = f\"Z-score {zscore:.2f} (<-3 SD, ~{percentile:.1f}th percentile) indicates severe growth deficit. Corresponds to WHO severe acute malnutrition threshold.\"\n        elif zscore < -2:\n            severity_category = \"Moderate growth deficit\"\n            interpretation = f\"Z-score {zscore:.2f} (-3 to -2 SD, ~{percentile:.1f}th percentile) indicates moderate growth deficit. Corresponds to WHO moderate malnutrition threshold.\"\n        elif zscore < -1:\n            severity_category = \"Mild growth deficit\"\n            interpretation = f\"Z-score {zscore:.2f} (-2 to -1 SD, ~{percentile:.1f}th percentile) indicates mild growth deficit. Within at-risk range.\"\n        elif zscore <= 1:\n            severity_category = \"Normal range\"\n            interpretation = f\"Z-score {zscore:.2f} (-1 to +1 SD, ~{percentile:.1f}th percentile) is within normal range.\"\n        elif zscore <= 2:\n            severity_category = \"Above normal\"\n            interpretation = f\"Z-score {zscore:.2f} (+1 to +2 SD, ~{percentile:.1f}th percentile) is above normal range.\"\n        else:\n            severity_category = \"Well above normal\"\n            interpretation = f\"Z-score {zscore:.2f} (>+2 SD, ~{percentile:.1f}th percentile) is well above normal range.\"\n\n    elif category == \"height-for-age\":\n        if zscore < -3:\n            severity_category = \"Severe height deficit\"\n            interpretation = f\"Z-score {zscore:.2f} (<-3 SD) indicates severe stunting (chronic growth deficit).\"\n        elif zscore < -2:\n            severity_category = \"Moderate height deficit\"\n            interpretation = f\"Z-score {zscore:.2f} (-3 to -2 SD) indicates stunting (chronic growth deficit).\"\n        elif zscore < -1:\n            severity_category = \"Mild height deficit\"\n            interpretation = f\"Z-score {zscore:.2f} (-2 to -1 SD) indicates mild height deficit.\"\n        else:\n            severity_category = \"Normal height\"\n            interpretation = f\"Z-score {zscore:.2f} (\u2265-1 SD) indicates normal height-for-age.\"\n\n    elif category == \"weight-for-age\":\n        if zscore < -3:\n            severity_category = \"Severe weight deficit\"\n            interpretation = f\"Z-score {zscore:.2f} (<-3 SD) indicates severe underweight.\"\n        elif zscore < -2:\n            severity_category = \"Moderate weight deficit\"\n            interpretation = f\"Z-score {zscore:.2f} (-3 to -2 SD) indicates underweight.\"\n        elif zscore < -1:\n            severity_category = \"Mild weight deficit\"\n            interpretation = f\"Z-score {zscore:.2f} (-2 to -1 SD) indicates mild underweight risk.\"\n        else:\n            severity_category = \"Normal weight\"\n            interpretation = f\"Z-score {zscore:.2f} (\u2265-1 SD) indicates normal weight-for-age.\"\n    else:\n        interpretation = f\"Z-score {zscore:.2f} for {measurement_type}. Measurement type not fully categorized.\"\n\n    # Add context note\n    context_note = \" | NOTE: Z-score interpretation provides growth assessment context. ASPEN malnutrition diagnosis requires \u22652 indicators. Consider clinical context, trajectory, and other factors.\"\n\n    return interpretation + context_note\n",
  "description": "Interpret z-score for growth assessment - v1.0.0 returns OBJECTIVE data only, no diagnostic labels",
  "parameters": {
    "zscore": {
      "type": "number",
      "description": "Z-score for growth measurement"
    },
    "measurement_type": {
      "type": "string",
      "description": "Type: 'weight-for-age', 'height-for-age', 'BMI-for-age', etc."
    }
  },
  "returns": {
    "type": "string",
    "description": "Objective interpretation with percentile context and clinical note"
  },
  "enabled": true,
  "signature": "(zscore: float, measurement_type: str) -> str"
}