{
  "name": "calculate_growth_percentile",
  "code": "def calculate_growth_percentile(measurement_type, value, age_months, sex, height_cm=None):\n    '''\n    Calculate growth percentile using CDC data\n    \n    Args:\n        measurement_type: 'weight', 'height', 'stature', or 'bmi'\n        value: measurement value (kg for weight, cm for height, kg/m\u00b2 for BMI)\n        age_months: age in months\n        sex: 1 for male, 2 for female\n             NOTE: The system automatically converts string values:\n                   'male', 'm', 'boy', 'man' \u2192 1\n                   'female', 'f', 'girl', 'woman' \u2192 2\n             You can pass either format, the function registry will handle conversion.\n        height_cm: height in cm (only needed for weight-for-stature)\n    \n    Returns:\n        Dict with percentile, z_score, and metric information\n    '''\n    from core.growth_calculators import CDCGrowthCalculator, GrowthMetric, Sex\n    \n    # Initialize calculator\n    calculator = CDCGrowthCalculator(data_directory=\"cdc_data\")\n    \n    # Map measurement type to metric\n    metric_map = {\n        'weight': GrowthMetric.WEIGHT_FOR_AGE,\n        'height': GrowthMetric.STATURE_FOR_AGE,\n        'stature': GrowthMetric.STATURE_FOR_AGE,\n        'bmi': GrowthMetric.BMI_FOR_AGE\n    }\n    \n    metric = metric_map.get(measurement_type.lower())\n    if not metric:\n        return {'error': f'Unknown measurement type: {measurement_type}'}\n    \n    # Convert sex to enum\n    sex_enum = Sex.MALE if sex == 1 else Sex.FEMALE\n    \n    # Calculate percentile\n    result = calculator.calculate_growth_percentile(\n        metric=metric,\n        sex=sex_enum,\n        value=value,\n        age_months=age_months,\n        height_cm=height_cm\n    )\n    \n    if result is None:\n        return {'error': 'Could not calculate percentile'}\n    \n    return {\n        'percentile': result.percentile,\n        'z_score': result.z_score,\n        'reference_value': result.reference_value,\n        'metric': result.metric\n    }\n",
  "description": "Calculate CDC growth percentile for weight, height/stature, or BMI",
  "parameters": {
    "measurement_type": {
      "type": "string",
      "description": "Type of measurement: 'weight', 'height', 'stature', or 'bmi'",
      "required": true
    },
    "value": {
      "type": "number",
      "description": "Measurement value (kg for weight, cm for height, kg/m\u00b2 for BMI)",
      "required": true
    },
    "age_months": {
      "type": "number",
      "description": "Age in months",
      "required": true
    },
    "sex": {
      "type": "number",
      "description": "Sex: 1 for male, 2 for female. Can also pass string 'male' or 'female' which will be automatically converted.",
      "required": true
    },
    "height_cm": {
      "type": "number",
      "description": "Height in cm (only for weight-for-stature calculations)",
      "required": false
    }
  },
  "returns": "Dictionary with percentile, z_score, reference_value, and metric",
  "signature": "(measurement_type, value, age_months, sex, height_cm=None)"
}