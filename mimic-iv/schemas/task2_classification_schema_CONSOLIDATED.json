{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Clinical Diagnosis Classification Schema (CONSOLIDATED)",
  "description": "Schema for multiclass diagnosis classification with 13 consolidated diagnoses - predict the single most appropriate diagnosis",
  "type": "object",
  "required": [
    "clinical_data_extraction",
    "clinical_pattern_analysis",
    "predicted_diagnosis",
    "clinical_reasoning"
  ],
  "properties": {
    "clinical_data_extraction": {
      "type": "object",
      "description": "Systematically extracted clinical data",
      "properties": {
        "chief_complaint": {"type": "string"},
        "key_symptoms": {
          "type": "array",
          "items": {"type": "string"}
        },
        "vital_signs_summary": {"type": "string"},
        "critical_lab_findings": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "test": {"type": "string"},
              "value": {"type": "string"},
              "abnormal": {"type": "boolean"}
            }
          }
        },
        "imaging_findings": {
          "type": "array",
          "items": {"type": "string"}
        },
        "medications": {
          "type": "array",
          "items": {"type": "string"}
        },
        "relevant_history": {
          "type": "array",
          "items": {"type": "string"}
        }
      }
    },
    "clinical_pattern_analysis": {
      "type": "object",
      "description": "Analysis of clinical patterns",
      "properties": {
        "primary_organ_systems_involved": {
          "type": "array",
          "items": {"type": "string"}
        },
        "disease_time_course": {
          "type": "string",
          "enum": ["ACUTE", "SUBACUTE", "CHRONIC", "ACUTE_ON_CHRONIC"]
        },
        "severity_assessment": {
          "type": "string",
          "enum": ["MILD", "MODERATE", "SEVERE", "CRITICAL"]
        },
        "key_pathophysiologic_features": {
          "type": "array",
          "items": {"type": "string"}
        }
      }
    },
    "predicted_diagnosis": {
      "type": "object",
      "description": "The single predicted CONSOLIDATED diagnosis classification",
      "required": ["diagnosis_id", "diagnosis_name", "category", "supporting_evidence"],
      "properties": {
        "diagnosis_id": {
          "type": "integer",
          "minimum": 1,
          "maximum": 13,
          "description": "Consolidated diagnosis ID (1-13)"
        },
        "diagnosis_name": {
          "type": "string",
          "description": "Name of the predicted consolidated diagnosis",
          "enum": [
            "Chest pain",
            "Coronary atherosclerosis",
            "NSTEMI",
            "Subendocardial infarction",
            "Atrial fibrillation",
            "Hypertensive heart disease with CKD",
            "Sepsis",
            "Pneumonia",
            "Urinary tract infection",
            "Acute kidney injury",
            "Depression",
            "Alcohol use disorder",
            "Chemotherapy encounter"
          ]
        },
        "category": {
          "type": "string",
          "enum": ["cardiovascular", "infectious", "renal", "psychiatric", "oncology"],
          "description": "Clinical category of the predicted diagnosis"
        },
        "supporting_evidence": {
          "type": "array",
          "description": "Key clinical evidence supporting this classification",
          "items": {"type": "string"}
        },
        "why_this_diagnosis": {
          "type": "string",
          "description": "Explanation of why this diagnosis was selected over alternatives"
        },
        "confidence_level": {
          "type": "string",
          "enum": ["VERY_HIGH", "HIGH", "MODERATE", "LOW", "VERY_LOW"],
          "description": "Confidence level in this classification"
        }
      }
    },
    "differential_diagnoses": {
      "type": "array",
      "description": "Top 3-5 alternative CONSOLIDATED diagnoses considered",
      "minItems": 0,
      "maxItems": 5,
      "items": {
        "type": "object",
        "required": ["diagnosis_id", "diagnosis", "considered_because"],
        "properties": {
          "diagnosis_id": {
            "type": "integer",
            "minimum": 1,
            "maximum": 13,
            "description": "Consolidated diagnosis ID"
          },
          "diagnosis": {
            "type": "string",
            "description": "Alternative consolidated diagnosis considered",
            "enum": [
              "Chest pain",
              "Coronary atherosclerosis",
              "NSTEMI",
              "Subendocardial infarction",
              "Atrial fibrillation",
              "Hypertensive heart disease with CKD",
              "Sepsis",
              "Pneumonia",
              "Urinary tract infection",
              "Acute kidney injury",
              "Depression",
              "Alcohol use disorder",
              "Chemotherapy encounter"
            ]
          },
          "category": {
            "type": "string",
            "enum": ["cardiovascular", "infectious", "renal", "psychiatric", "oncology"]
          },
          "considered_because": {
            "type": "string",
            "description": "Evidence that made you consider this diagnosis"
          },
          "ruled_out_because": {
            "type": "string",
            "description": "Contradicting evidence or missing features that ruled it out"
          }
        }
      }
    },
    "clinical_reasoning": {
      "type": "object",
      "description": "Detailed clinical reasoning process",
      "properties": {
        "reasoning_approach": {
          "type": "array",
          "items": {
            "type": "string",
            "enum": [
              "PATTERN_RECOGNITION",
              "BAYESIAN_REASONING",
              "CRITERIA_BASED",
              "EXCLUSION_APPROACH"
            ]
          }
        },
        "key_decision_points": {
          "type": "array",
          "items": {
            "type": "object",
            "properties": {
              "question": {"type": "string"},
              "evidence_reviewed": {"type": "string"},
              "conclusion": {"type": "string"}
            }
          }
        },
        "diagnostic_challenges": {
          "type": "array",
          "description": "Challenges in making this classification",
          "items": {
            "type": "object",
            "properties": {
              "challenge": {"type": "string"},
              "how_addressed": {"type": "string"}
            }
          }
        },
        "data_quality_assessment": {
          "type": "string",
          "enum": ["EXCELLENT", "GOOD", "FAIR", "POOR"],
          "description": "Quality of available clinical data"
        },
        "confidence_factors": {
          "type": "array",
          "description": "Factors affecting confidence in classification",
          "items": {"type": "string"}
        },
        "icd_code_consolidation_notes": {
          "type": "string",
          "description": "Notes on how ICD-9 vs ICD-10 codes were considered in the clinical reasoning"
        }
      }
    }
  }
}
